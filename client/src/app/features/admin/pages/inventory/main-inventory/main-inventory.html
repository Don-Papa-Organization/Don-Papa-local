<div class="inventory-page">
    <div class="inventory-header">
        <h1 class="inventory-title">Productos</h1>
        <div class="buttons">
            <app-ui-only-icon-button texto="Producto" [urlIcono]="urlsIconos[0]" [showTextStyle]="showTextStyle"
                (action)="onAgregar()">
            </app-ui-only-icon-button>


            <app-ui-only-icon-button texto="Categoria" [urlIcono]="urlsIconos[0]" [showTextStyle]="true"
                (action)="onAgregarCategoria()">
            </app-ui-only-icon-button>

            <app-ui-only-icon-button texto="Categoria" [urlIcono]="urlsIconos[1]" [showTextStyle]="true"
                (action)="onEditarCategoria()">
            </app-ui-only-icon-button>

            <app-ui-only-icon-button urlIcono="icons/reload.svg" (action)="cargarProductos()">

            </app-ui-only-icon-button>
        </div>



    </div>


    <app-ui-modal titulo="">

    </app-ui-modal>


    <div class="table-content">
        <app-ui-tabla name="table-content" [theadData]="columnas" [tbodyData]="productosTableData"
            (editarRegistro)="onEditar($event)" (eliminarRegistro)="onEliminar($event)">
        </app-ui-tabla>
    </div>



    <app-ui-modal titulo="¿Desea eliminar producto?" [mostrar]="mostrarModalEliminar" (cerrar)="cerrarModalEliminar()">
        <ui-button texto="Eliminar Producto" [noBackgroundColor]="true" [backgroundColor]="'#EF4444'"
            (accion)="eliminarProducto()"></ui-button>
    </app-ui-modal>

    <app-agregar-form [mostrar]="mostrarModalAgregar" [categoriasOptions]="categoriasOptions"
        [showTextStyle]="showTextStyle" (cerrar)="cerrarModalAgregar()" (productoCreado)="onProductoCreado()">
    </app-agregar-form>

    <app-editar-form [mostrar]="mostrarModalEditar" [categoriasOptions]="categoriasOptions"
        [showTextStyle]="showTextStyle" [producto]="registroSeleccionado" (cerrar)="cerrarModalEditar()"
        (productoActualizado)="onProductoActualizado()">
    </app-editar-form>

    <!-- Modal Agregar Categoria -->
    <app-ui-modal titulo="Agregar Categoría" [mostrar]="mostrarModalAgregarCategoria"
        (cerrar)="cerrarModalAgregarCategoria()">
        <app-ui-form maxHeight="50vh" maxWidth="600px">
            <ui-input tituloInput="Nombre Categoría" [(ngModel)]="nuevaCategoriaNombre" name="nuevaCategoriaNombre">
            </ui-input>
            <div footer>
                <ui-button texto="Guardar" (accion)="guardarCategoria()"></ui-button>
            </div>
        </app-ui-form>
    </app-ui-modal>

    <!-- Modal Editar/Eliminar Categoria -->
    <app-ui-modal titulo="Gestionar Categoría" [mostrar]="mostrarModalEditarCategoria"
        (cerrar)="cerrarModalEditarCategoria()">
        <app-ui-form maxHeight="50vh" maxWidth="600px">
            <app-ui-combobox tituloInput="Seleccionar Categoría" [options]="categoriasOptions"
                [(selectedOption)]="categoriaSeleccionadaId">
            </app-ui-combobox>

            <ui-input tituloInput="Nuevo Nombre (Opcional)" [(ngModel)]="categoriaNombreEditado"
                name="categoriaNombreEditado">
            </ui-input>

            <div footer style="display: flex; gap: 10px; justify-content: flex-end;">
                <ui-button texto="Eliminar" [noBackgroundColor]="true" [backgroundColor]="'#EF4444'"
                    (accion)="eliminarCategoria()" [disabled]="!categoriaSeleccionadaId || !!categoriaNombreEditado">
                </ui-button>
                <ui-button texto="Actualizar" [noBackgroundColor]="true" (accion)="actualizarCategoria()"
                    [disabled]="!categoriaSeleccionadaId || !categoriaNombreEditado">
                </ui-button>
            </div>
        </app-ui-form>
    </app-ui-modal>
</div>