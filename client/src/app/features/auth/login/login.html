<app-ui-form titulo="Iniciar Sesión" (formSubmit)="submit($event)" class="formulario">
    <ui-input 
        tituloInput="Correo electronico" 
        placeholder="ejemplo@correo.com"
        name="email"
        tipo="email"
        required
        email
        [(ngModel)]="email"
        #emailModel="ngModel"
    ></ui-input>            

    <section class="contrasenaSection">
        <ui-input 
            tituloInput="Contraseña" 
            placeholder="Ingresa tu contraseña"
            name="password"
            tipo="password"
            required
            minlength="8"
            pattern="^(?=.*[A-Z])(?=.*\d).{8,}$"
            [(ngModel)]="password"
            #passwordModel="ngModel"
        ></ui-input>
        <a routerLink="/auth/forgot-password" class="link">¿Olvidaste tu contraseña?</a>
    </section>

    <p class="error" *ngIf="emailModel.invalid && emailModel.touched">
        <ng-container *ngIf="emailModel.errors?.['required']">El correo es obligatorio.</ng-container>
        <ng-container *ngIf="emailModel.errors?.['email']">El correo no tiene un formato válido.</ng-container>
    </p>

    <p class="error" *ngIf="passwordModel.invalid && passwordModel.touched">
        <ng-container *ngIf="passwordModel.errors?.['required']">La contraseña es obligatoria.</ng-container>
        <ng-container *ngIf="passwordModel.errors?.['minlength']">Debe tener al menos 8 caracteres.</ng-container>
        <ng-container *ngIf="passwordModel.errors?.['pattern']">Debe incluir mínimo una mayúscula y un número.</ng-container>
    </p>

    <p class="success" *ngIf="successMessage">{{ successMessage }}</p>
    <p class="p" *ngIf="(error$ | async) as error">{{ error }}</p>

    <div footer>
        <ui-button
            texto="Iniciar Sesion"
            customWidth="250px"
            tipo="submit"
            [disabled]="emailModel.invalid || passwordModel.invalid || !!(loading$ | async)"
        ></ui-button>
        
        <p class="link_iniciar_sesion">¿No tienes cuenta? <a routerLink="/auth/register" class="link">Registrarse</a></p>
    </div>
</app-ui-form>