<main class="login-page">
    <img src="" alt="" srcset="">
    <h2>Crear cuenta</h2>

    <form class="formulario" #registerForm="ngForm" (ngSubmit)="submit(registerForm)">
        <ui-input 
        tituloInput="Correo electronico" 
        placeholder="ejemplo@correo.com"
        name="email"
        tipo="email"
        required
        email
        [(ngModel)]="email"
        #emailModel="ngModel"


        >
        </ui-input>            

        <ui-input 
        tituloInput="Contraseña" 
        placeholder="Ingresa tu contraseña"
        name="password"
        tipo="password"
        required
        minlength="8"
        pattern="^(?=.*[A-Z])(?=.*\d).{8,}$"
        [(ngModel)]="password"
        #passwordModel="ngModel"
        >
        </ui-input>

        <section class="contrasenaSection">
            <ui-input 
            tituloInput="Confirmar contraseña" 
            placeholder="Ingresa tu contraseña"
            name="passwordConfirmation"
            tipo="password"
            required
            minlength="8"
            pattern="^(?=.*[A-Z])(?=.*\d).{8,}$"
            [(ngModel)]="passwordConfirmation"
            #passwordConfirmationModel="ngModel"
            >
            </ui-input>
            <p>La contraseña debe tener al menos 8 caracteres, incluyendo una letra mayúscula y un número</p>   
        </section>
        


        <ui-button
            texto="Crear cuenta"
            customWidth="250px"
            tipo="submit"
            [disabled]="registerForm.invalid || !!(loading$ | async)"
        >
        </ui-button>

        <p class="error" *ngIf="emailModel.invalid && (emailModel.touched || registerForm.submitted)">
            <ng-container *ngIf="emailModel.errors?.['required']">El correo es obligatorio.</ng-container>
            <ng-container *ngIf="emailModel.errors?.['email']">El correo no tiene un formato válido.</ng-container>
        </p>

        <p class="error" *ngIf="emailExistsMessage">
            {{ emailExistsMessage }}
        </p>

        <p class="error" *ngIf="passwordModel.invalid && (passwordModel.touched || registerForm.submitted)">
            <ng-container *ngIf="passwordModel.errors?.['required']">La contraseña es obligatoria.</ng-container>
            <ng-container *ngIf="passwordModel.errors?.['minlength']">Debe tener al menos 8 caracteres.</ng-container>
            <ng-container *ngIf="passwordModel.errors?.['pattern']">Debe incluir mínimo una mayúscula y un número.</ng-container>
        </p>

        <p class="error" *ngIf="passwordConfirmationModel.invalid && (passwordConfirmationModel.touched || registerForm.submitted)">
            <ng-container *ngIf="passwordConfirmationModel.errors?.['required']">Confirma tu contraseña.</ng-container>
            <ng-container *ngIf="passwordConfirmationModel.errors?.['minlength']">Debe tener al menos 8 caracteres.</ng-container>
            <ng-container *ngIf="passwordConfirmationModel.errors?.['pattern']">Debe incluir mínimo una mayúscula y un número.</ng-container>
        </p>

        <p class="error" *ngIf="passwordMismatch">
            Las contraseñas no coinciden.
        </p>

        <p class="success" *ngIf="successMessage">{{ successMessage }}</p>

        <p class="p" *ngIf="(error$ | async) as error">{{ error }}</p>

        <p class="p">¿Ya tienes cuenta? <a routerLink="/auth/login" class="link">Iniciar sesión</a></p>
    </form>
</main>